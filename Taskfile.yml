version: '3'

env:
  TASK_TEMP_DIR: /home/dnk/.task

tasks:
  default:
    desc: Pull and build prx
    cmds:
      - git pull
      - task: build

  build:
    desc: Build prx binary
    sources:
      - ./*.go
      - go.mod
      - go.sum
    generates:
      - /home/dnk/bin/prx
    cmds:
      - go build -o ~/bin/prx .

  clean:
    desc: Remove prx binary
    cmds:
      - rm -f ~/bin/prx
